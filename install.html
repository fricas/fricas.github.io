<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Installation Guide &#8212; FriCAS</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css?v=2bf1fcf8" />
    <link rel="stylesheet" href="_static/style.css" type="text/css" />
    
    <script src="_static/documentation_options.js?v=93b43ced"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Help" href="help.html" />
    <link rel="prev" title="Download" href="download.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="help.html" title="Help"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="download.html" title="Download"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">FriCAS</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="download.html" accesskey="U">Download</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Installation Guide</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="installation-guide">
<h1>Installation Guide<a class="headerlink" href="#installation-guide" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#quick-installation" id="id4">Quick installation</a></p></li>
<li><p><a class="reference internal" href="#prerequisites" id="id5">Prerequisites</a></p>
<ul>
<li><p><a class="reference internal" href="#standard-build-tools" id="id6">Standard build tools</a></p></li>
<li><p><a class="reference internal" href="#lisp" id="id7">Lisp</a></p></li>
<li><p><a class="reference internal" href="#jfricas-optional" id="id8">jFriCAS (optional)</a></p></li>
<li><p><a class="reference internal" href="#hunchentoot-optional" id="id9">Hunchentoot (optional)</a></p></li>
<li><p><a class="reference internal" href="#x-libraries-optional-but-needed-for-graphics-and-hyperdoc" id="id10">X libraries (optional, but needed for graphics and HyperDoc)</a></p></li>
<li><p><a class="reference internal" href="#xvfb-optional-but-highly-recommended" id="id11">xvfb (optional, but highly recommended)</a></p></li>
<li><p><a class="reference internal" href="#gmp-optional" id="id12">GMP (optional)</a></p></li>
<li><p><a class="reference internal" href="#latex-optional" id="id13">LaTeX (optional)</a></p></li>
<li><p><a class="reference internal" href="#sphinxdoc-optional" id="id14">SphinxDoc (optional)</a></p></li>
<li><p><a class="reference internal" href="#aldor-optional" id="id15">Aldor (optional)</a></p></li>
<li><p><a class="reference internal" href="#extra-libraries-needed-by-ecl" id="id16">Extra libraries needed by ECL</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#detailed-installation-instructions" id="id17">Detailed installation instructions</a></p>
<ul>
<li><p><a class="reference internal" href="#extra-information" id="id18">Extra information</a></p></li>
<li><p><a class="reference internal" href="#hyperdoc-and-graphics" id="id19">HyperDoc and graphics</a></p></li>
<li><p><a class="reference internal" href="#algebra-optimization" id="id20">Algebra optimization</a></p></li>
<li><p><a class="reference internal" href="#using-gmp-with-sbcl-or-clozure-cl" id="id21">Using GMP with SBCL or Clozure CL</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#post-compilation-steps-optional" id="id22">Post-compilation steps (optional)</a></p>
<ul>
<li><p><a class="reference internal" href="#build-extra-documentation-book-and-website" id="id23">Build extra documentation (book and website)</a></p></li>
<li><p><a class="reference internal" href="#build-fricas-aldor-interface-libfricas-al" id="id24">Build FriCAS-Aldor interface (libfricas.al)</a></p></li>
<li><p><a class="reference internal" href="#install-jfricas" id="id25">Install jFriCAS</a></p></li>
<li><p><a class="reference internal" href="#install-frimacs" id="id26">Install frimacs</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#creation-of-distribution-tarballs" id="id27">Creation of distribution tarballs</a></p></li>
<li><p><a class="reference internal" href="#installation-from-binary-distribution" id="id28">Installation from binary distribution</a></p></li>
<li><p><a class="reference internal" href="#known-problems" id="id29">Known problems</a></p></li>
</ul>
</nav>
<p>Note: this text is mostly about installation from sources.
If you fetched compiled binaries skip to section about
binary distribution.</p>
<section id="quick-installation">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Quick installation</a><a class="headerlink" href="#quick-installation" title="Link to this heading">¶</a></h2>
<p>FriCAS now tries to support standard GNU build/installation
conventions.  So if you have sources and all prerequisites, then</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./configure &amp;&amp; make &amp;&amp; sudo make install
</pre></div>
</div>
<p>should work.  The above will install FriCAS files into
<code class="docutils literal notranslate"><span class="pre">/usr/local/lib/fricas/</span></code>  and put the <code class="docutils literal notranslate"><span class="pre">fricas</span></code> command into
<code class="docutils literal notranslate"><span class="pre">/usr/local/bin/</span></code>.
You can give arguments to <code class="docutils literal notranslate"><span class="pre">configure</span></code> to change those locations.</p>
</section>
<section id="prerequisites">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Prerequisites</a><a class="headerlink" href="#prerequisites" title="Link to this heading">¶</a></h2>
<section id="standard-build-tools">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Standard build tools</a><a class="headerlink" href="#standard-build-tools" title="Link to this heading">¶</a></h3>
<p>To <em>build</em> FriCAS you need standard build tools like C compiler and
make.</p>
</section>
<section id="lisp">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Lisp</a><a class="headerlink" href="#lisp" title="Link to this heading">¶</a></h3>
<p>To <em>build</em> FriCAS you need <em>one</em> of the following Lisp variants:</p>
<ul>
<li><p><a class="reference external" href="http://sbcl.sourceforge.net/platform-table.html">SBCL</a> 1.0.7 or later (preferred)</p>
<p><a class="reference external" href="http://sbcl.sourceforge.net/platform-table.html">http://sbcl.sourceforge.net/platform-table.html</a></p>
</li>
<li><p><a class="reference external" href="http://ccl.clozure.com/manual/chapter2.2.html">Clozure CL</a> (former openmcl), starting from openmcl 1.1 prerelease
070512</p>
<p><a class="reference external" href="https://ccl.clozure.com/download.html">https://ccl.clozure.com/download.html</a></p>
</li>
<li><p><a class="reference external" href="http://ecls.sourceforge.net">ECL</a> 0.9l or later</p>
<p><a class="reference external" href="https://common-lisp.net/project/ecl">https://common-lisp.net/project/ecl</a></p>
</li>
<li><p><a class="reference external" href="http://clisp.cons.org">CLISP</a> 2.41 or later</p></li>
<li><p><a class="reference external" href="https://www.cons.org/cmucl/">CMUCL</a></p></li>
<li><p>FriCAS builds also using <a class="reference external" href="https://www.gnu.org/software/gcl">GCL</a>, at least build using released version
2.6.14 works.  Build using older GCL versions no longer works.
Note that with default setting build is likely to fail.
Look at GCL_MEM_MULTIPLE note in <a class="reference internal" href="#known-problems">Known problems</a> section
for possible workaround.</p></li>
</ul>
<p>All Lisp implementations should give essentially the same
functionality, however performance (speed) may differ quite a lot.  ATM
CMU CL port should be considered experimental, it received only little
testing.  Also CMU CL seem to have problems on some machines.  By
default FriCAS tries to use SBCL, since it is fast and reliable.  On
64-bit AMD64 on average SBCL is the fastest one (9 times faster than
CLISP), Clozure CL and GCL the second (about 3 times slower than
SBCL), then ECL (about 7 times slower than SBCL) and CLISP is the
slowest one.  Note: very old versions of ECL were much (about 4 times)
slower, versions between 13.5.1 and 16.1.3 gave best performance and
newest ECL versions are progressively slower.</p>
<p>Some computation work much faster on 64-bit machines, especially
when using SBCL.</p>
</section>
<section id="jfricas-optional">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">jFriCAS (optional)</a><a class="headerlink" href="#jfricas-optional" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="https://jfricas.readthedocs.io">jFriCAS</a> is an interface for running <a class="reference external" href="https://fricas.github.io/index.html">FriCAS</a> in a <a class="reference external" href="https://jupyter.org">Jupyter</a> notebook.
It should be installed <strong>after</strong> <a class="reference external" href="https://fricas.github.io/index.html">FriCAS</a> has been installed.</p>
<p><strong>Note:</strong> It currently only works with an <a class="reference external" href="http://sbcl.sourceforge.net/platform-table.html">SBCL</a> image that has the
<a class="reference external" href="https://edicl.github.io/hunchentoot/">Hunchentoot</a> webserver included.  See next section.</p>
</section>
<section id="hunchentoot-optional">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Hunchentoot (optional)</a><a class="headerlink" href="#hunchentoot-optional" title="Link to this heading">¶</a></h3>
<p>The <a class="reference external" href="https://jfricas.readthedocs.io">jFriCAS</a> interface needs a web server built into FRICASsys binary.
This can be done by using Lisp (currently only <a class="reference external" href="http://sbcl.sourceforge.net/platform-table.html">SBCL</a>) containing
the <a class="reference external" href="https://edicl.github.io/hunchentoot/">Hunchentoot</a> web server.  You can provide your own Lisp with
preloaded <a class="reference external" href="https://edicl.github.io/hunchentoot/">Hunchentoot</a>.  Or you can fetch the <code class="docutils literal notranslate"><span class="pre">hsbcl-1.3.9.tar</span></code>
tarball from FriCAS distribution area at</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>https://sourceforge.net/projects/fricas/files/fricas/1.3.9/hsbcl-1.3.9.tar
</pre></div>
</div>
<p>Then do</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>tar -xf hsbcl-1.3.9.tar
cd hsbcl
./build_hsbcl &gt; build_hsbcl.log 2&gt;&amp;1
</pre></div>
</div>
<p>This assumes that the base Lisp to use is <a class="reference external" href="http://sbcl.sourceforge.net/platform-table.html">SBCL</a> and creates executable
binary <code class="docutils literal notranslate"><span class="pre">hsbcl</span></code> which contains <a class="reference external" href="https://edicl.github.io/hunchentoot/">Hunchentoot</a>.  If your <a class="reference external" href="http://sbcl.sourceforge.net/platform-table.html">SBCL</a> is started
in different way (say via full pathname), then edit <code class="docutils literal notranslate"><span class="pre">build_hsbcl</span></code> to
match.  After creating <code class="docutils literal notranslate"><span class="pre">hsbcl</span></code> one can then configure FriCAS like</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>../fricas-1.3.9/configure --with-lisp=/path/to/hsbcl --enable-gmp
</pre></div>
</div>
<p>FriCAS build in this way will contain <a class="reference external" href="https://edicl.github.io/hunchentoot/">Hunchentoot</a> and can be used
by <a class="reference external" href="https://jfricas.readthedocs.io">jFriCAS</a>.</p>
</section>
<section id="x-libraries-optional-but-needed-for-graphics-and-hyperdoc">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">X libraries (optional, but needed for graphics and HyperDoc)</a><a class="headerlink" href="#x-libraries-optional-but-needed-for-graphics-and-hyperdoc" title="Link to this heading">¶</a></h3>
<p>On Debian (or Ubuntu) install the following packages.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install libx11-dev libxt-dev libice-dev \
                 libsm-dev libxau-dev libxdmcp-dev libxpm-dev
</pre></div>
</div>
</section>
<section id="xvfb-optional-but-highly-recommended">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">xvfb (optional, but highly recommended)</a><a class="headerlink" href="#xvfb-optional-but-highly-recommended" title="Link to this heading">¶</a></h3>
<p>If you compile FriCAS from the <a class="reference external" href="https://github.com/fricas/fricas">FriCAS git repository</a>, and <code class="docutils literal notranslate"><span class="pre">configure</span></code>
does not detect the <code class="docutils literal notranslate"><span class="pre">xvfb-run</span></code> program, then graphic examples will
not be built.  See Section <a class="reference internal" href="#hyperdoc-and-graphics">HyperDoc and graphics</a> for more detail.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install xvfb
</pre></div>
</div>
</section>
<section id="gmp-optional">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">GMP (optional)</a><a class="headerlink" href="#gmp-optional" title="Link to this heading">¶</a></h3>
<p>When you use SBCL or Clozure CL the <code class="docutils literal notranslate"><span class="pre">--enable-gmp</span></code> configure option
is available only if the development version of GMP is installed.
Note: using GMP should work on all SBCL and Clozure CL platforms
except for Clozure CL on Power PC.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install libgmp-dev
</pre></div>
</div>
</section>
<section id="latex-optional">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">LaTeX (optional)</a><a class="headerlink" href="#latex-optional" title="Link to this heading">¶</a></h3>
<p>If you run FriCAS in <a class="reference external" href="https://www.gnu.org/software/emacs/">Emacs</a> (efricas) you can enable</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>)set output tex on
</pre></div>
</div>
<p>to show rendered TeX output.  For that to work, you need the following.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install texlive auctex dvipng
</pre></div>
</div>
<p>In order to build the <a class="reference external" href="https://fricas.github.io/book.pdf">FriCAS Book</a>, you also need the following
LaTeX packages (available from <a class="reference external" href="https://www.ctan.org/">CTAN</a>).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>amsmath
amssymb
breqn
color
epstopdf
framed
graphicx
hyperref
listings
makeidx
tensor
tikz
verbatim
xparse
</pre></div>
</div>
</section>
<section id="sphinxdoc-optional">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">SphinxDoc (optional)</a><a class="headerlink" href="#sphinxdoc-optional" title="Link to this heading">¶</a></h3>
<p>The documentation is built via <a class="reference external" href="https://www.sphinx-doc.org">Sphinx</a>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install python3 python3-pip
pip3 install -U Sphinx
</pre></div>
</div>
</section>
<section id="aldor-optional">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Aldor (optional)</a><a class="headerlink" href="#aldor-optional" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="https://github.com/aldorlang/aldor">Aldor</a> was originally invented to be the next generation compiler for
<a class="reference external" href="http://axiom-developer.org/">Axiom</a> (the system that <a class="reference external" href="https://fricas.github.io/index.html">FriCAS</a> forked from).  If you want to use
<a class="reference external" href="https://github.com/aldorlang/aldor">Aldor</a> to extend the <a class="reference external" href="https://fricas.github.io/index.html">FriCAS</a> library, you must, of course, have <a class="reference external" href="https://github.com/aldorlang/aldor">Aldor</a>
installed, and add <code class="docutils literal notranslate"><span class="pre">--enable-aldor</span></code> to your configure options when
you compile FriCAS.</p>
<p>The commands below download the <a class="reference external" href="https://github.com/aldorlang/aldor">Aldor</a> git repository into
<code class="docutils literal notranslate"><span class="pre">$ALDORDIR</span></code> and install it into <code class="docutils literal notranslate"><span class="pre">$ALDORINSTALLDIR</span></code>.  Adapt the
directories to whatever you like.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ALDORDIR=$HOME/aldor
ALDORINSTALLDIR=$ALDORDIR/install
mkdir -p $ALDORDIR
cd $ALDORDIR
git clone https://github.com/aldorlang/aldor.git
mkdir $ALDORDIR/build
cd $ALDORDIR/build
$ALDORDIR/aldor/aldor/configure --prefix=$ALDORINSTALLDIR --disable-maintainer-mode
make -j8
make install
</pre></div>
</div>
<p>Then make the aldor executable available in your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> by adding
the following lines to your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ALDORINSTALLDIR=/absolute/path/to/aldor/install
export PATH=$ALDORINSTALLDIR/bin:$PATH
</pre></div>
</div>
</section>
<section id="extra-libraries-needed-by-ecl">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Extra libraries needed by ECL</a><a class="headerlink" href="#extra-libraries-needed-by-ecl" title="Link to this heading">¶</a></h3>
<p>This only applies if you use Debian ECL.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install libffi-dev
</pre></div>
</div>
</section>
</section>
<section id="detailed-installation-instructions">
<h2><a class="toc-backref" href="#id17" role="doc-backlink">Detailed installation instructions</a><a class="headerlink" href="#detailed-installation-instructions" title="Link to this heading">¶</a></h2>
<p>We assume that you have installed all necessary prerequisites.</p>
<ol class="arabic" start="0">
<li><p>Change to a directory with enough (0.8 GB) free space.</p></li>
<li><p>Fetch sources.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>git clone --depth 1 https://github.com/fricas/fricas
</pre></div>
</div>
<p>Remove the <code class="docutils literal notranslate"><span class="pre">--depth</span> <span class="pre">1</span></code> option for access to the change history.</p>
</li>
<li><p>Create build directory and change to it</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mkdir fr-build
cd fr-build
</pre></div>
</div>
</li>
<li><p>Configure.  Assuming that you want fricas files to be installed in
<code class="docutils literal notranslate"><span class="pre">/tmp/usr</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>../fricas/configure --with-lisp=/path/to/your/lisp --prefix=/tmp/usr
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">/path/to/your/lisp</span></code> is name of your Lisp.  For example,
type</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>../fricas/configure --with-lisp=&quot;sbcl --dynamic-space-size 4096&quot; --prefix=/tmp/usr --enable-gmp --enable-aldor
</pre></div>
</div>
<p>to build with <a class="reference external" href="http://sbcl.sourceforge.net/platform-table.html">SBCL</a> and 4 GiB dynamic space, use <a class="reference external" href="https://gmplib.org">GMP</a>, and enable the
build of the <a class="reference external" href="https://github.com/aldorlang/aldor">Aldor</a> library <code class="docutils literal notranslate"><span class="pre">libfricas.al</span></code>.</p>
<p>Use</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--with-lisp=&quot;/path/to/hsbcl&quot;
</pre></div>
</div>
<p>to include the <a class="reference external" href="https://edicl.github.io/hunchentoot/">Hunchentoot</a> webserver if you later want to install
<a class="reference external" href="https://jfricas.readthedocs.io">jFriCAS</a>.</p>
<p>Type</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>../fricas/configure --help
</pre></div>
</div>
<p>to see all possible options.</p>
</li>
<li><p>Build and install</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make
make install
</pre></div>
</div>
<p>Optionally, to gain confidence that your build works, you can
run tests</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make check
</pre></div>
</div>
</li>
</ol>
<section id="extra-information">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">Extra information</a><a class="headerlink" href="#extra-information" title="Link to this heading">¶</a></h3>
<p>The preferred way to build FriCAS is to use an already installed Lisp.
Also, it is preferable to use a separate build directory.  Assuming
that the source tree is in <code class="docutils literal notranslate"><span class="pre">$HOME/fricas</span></code>, you build in
<code class="docutils literal notranslate"><span class="pre">$HOME/fricas-build</span></code> subdirectory and your Lisp is called
<code class="docutils literal notranslate"><span class="pre">sbcl</span></code> the following should just work.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd $HOME/fricas-build
$HOME/fricas/configure --with-lisp=sbcl &amp;&amp; make &amp;&amp; sudo make install
</pre></div>
</div>
<p>Currently <code class="docutils literal notranslate"><span class="pre">--with-lisp</span></code> option accepts all supported lisp variants,
namely SBCL, CLISP, ECL, GCL and Clozure CL (openmcl).  Note: the
argument is just a command to invoke the respective Lisp variant.
Build machinery will automatically detect which Lisp is in use and
adjust as needed.</p>
<p>Note that <a class="reference external" href="https://jfricas.readthedocs.io">jFriCAS</a> has currently only been tested to work with <a class="reference external" href="http://sbcl.sourceforge.net/platform-table.html">SBCL</a>.</p>
</section>
<section id="hyperdoc-and-graphics">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">HyperDoc and graphics</a><a class="headerlink" href="#hyperdoc-and-graphics" title="Link to this heading">¶</a></h3>
<p>If you compile FriCAS from the <a class="reference external" href="https://github.com/fricas/fricas">FriCAS git repository</a>, and <code class="docutils literal notranslate"><span class="pre">configure</span></code>
does not detect the <code class="docutils literal notranslate"><span class="pre">xvfb-run</span></code> program, then graphic examples will
not be built.  This results in broken HyperDoc pages – all graphic
examples will be missing (and trying to access them will crash
hypertex).</p>
<p>To get working graphic examples login into X and replace <code class="docutils literal notranslate"><span class="pre">make</span></code>
above by the following</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make MAYBE_VIEWPORTS=viewports
</pre></div>
</div>
<p>Alternatively, after <code class="docutils literal notranslate"><span class="pre">make</span></code> finishes use</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make viewports
</pre></div>
</div>
<p><em>Important</em>: building graphic examples accesses the X server, so it
will not work on text console.  During build drawings will temporarily
appear on the screen.  Redirecting X via <code class="docutils literal notranslate"><span class="pre">ssh</span></code> should work fine, but
may be slow.</p>
<p>It is possible to use the <code class="docutils literal notranslate"><span class="pre">xvfb-run</span></code> program, replacing
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">viewports</span></code> above by</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>xvfb-run -a -s &#39;-screen 0 1024x768x24&#39; make viewports
</pre></div>
</div>
</section>
<section id="algebra-optimization">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">Algebra optimization</a><a class="headerlink" href="#algebra-optimization" title="Link to this heading">¶</a></h3>
<p>When writing/compiling programs there is always tradeoff between speed
and safety.  Programs may include many checks to detect errors early
(and allow recovery).  Such programs are safe but checks take time so
the program is slower.  Or a program may just blindly goes forward
hoping that everything goes well.  Typically the second program will be
faster, but in case of problems it may crash without any hint why and
take user data with it.</p>
<p>Safety checks may be written by programmers, but another possibility
is to have a compiler which automatically inserts various checks.
FriCAS is compiled by a Lisp compiler and Lisp compilers may insert
safety checks.  How many checks are inserted may be controlled by the
user.  By default FriCAS tries to strike good balance between speed and
safety.  However, some FriCAS users want different tradeoff.  The</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--enable-algebra-optimization=S
</pre></div>
</div>
<p>option to configure allows changing this setting: S is a Lisp
expression specifying speed/safety tradeoff used by Lisp compiler.  For
example</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--enable-algebra-optimization=&quot;((speed 3) (safety 0))&quot;
</pre></div>
</div>
<p>chooses fastest (but unsafe) variant, while</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--enable-algebra-optimization=&quot;((speed 2) (safety 3))&quot;
</pre></div>
</div>
<p>should be very safe (but possibly slow).</p>
<p>Note: this setting affects only algebra (that is mathematical code).
The rest of FriCAS always uses default setting.  Rationale for this is
that mathematical code is unlikely to contain errors which can crash
the whole system.</p>
</section>
<section id="using-gmp-with-sbcl-or-clozure-cl">
<h3><a class="toc-backref" href="#id21" role="doc-backlink">Using GMP with SBCL or Clozure CL</a><a class="headerlink" href="#using-gmp-with-sbcl-or-clozure-cl" title="Link to this heading">¶</a></h3>
<p>Currently on average FriCAS is fastest when compiled using <a class="reference external" href="http://sbcl.sourceforge.net/platform-table.html">SBCL</a>.
However, SBCL normally uses its own routines for computations with
large numbers and those routines are slower than <a class="reference external" href="https://gmplib.org">GMP</a>.  FriCAS now has
special support to replace sbcl arithmetic routines by GMP.  To use
this support install GMP including header files (development package
if you install via a package manager).  Currently there are two
available <a class="reference external" href="https://gmplib.org">GMP</a> versions, version 5 is much faster than version 4.  Then
configure FriCAS adding <code class="docutils literal notranslate"><span class="pre">--enable-gmp</span></code> option to the <code class="docutils literal notranslate"><span class="pre">configure</span></code>
arguments.</p>
<p>FriCAS also has support for using <a class="reference external" href="https://gmplib.org">GMP</a> with <a class="reference external" href="http://ccl.clozure.com/manual/chapter2.2.html">Clozure CL</a>.  Currently
Clozure CL with GMP works on 32/64 bit Intel/AMD processors and ARM
(using Clozure CL with GMP is not supported on Power PC processors).</p>
<p>When you have GMP installed in a non-standard location (this usually
means anything other than <code class="docutils literal notranslate"><span class="pre">/usr</span></code> or <code class="docutils literal notranslate"><span class="pre">/usr/local</span></code>) then you can
specify the location with</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>configure --with-gmp=PATH
</pre></div>
</div>
<p>This means that the header files are in <code class="docutils literal notranslate"><span class="pre">PATH/include</span></code> and libgmp
is in <code class="docutils literal notranslate"><span class="pre">PATH/lib</span></code>.  If you have a different setup, then you can
specify</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--with-gmp-include=INCLUDEPATH --with-gmp-lib=LIBPATH
</pre></div>
</div>
<p>(specify the directories where the header files and libgmp are found,
respectively).</p>
<p>These options also implicitly set <code class="docutils literal notranslate"><span class="pre">--enable-gmp</span></code>.  However, if
<code class="docutils literal notranslate"><span class="pre">--enable-gmp=no</span></code> is given, then <code class="docutils literal notranslate"><span class="pre">--with-gmp=...</span></code>,
<code class="docutils literal notranslate"><span class="pre">--with-gmp-include=...</span></code> and <code class="docutils literal notranslate"><span class="pre">--with-gmp-lib=...</span></code> is ignored.</p>
</section>
</section>
<section id="post-compilation-steps-optional">
<h2><a class="toc-backref" href="#id22" role="doc-backlink">Post-compilation steps (optional)</a><a class="headerlink" href="#post-compilation-steps-optional" title="Link to this heading">¶</a></h2>
<section id="build-extra-documentation-book-and-website">
<h3><a class="toc-backref" href="#id23" role="doc-backlink">Build extra documentation (book and website)</a><a class="headerlink" href="#build-extra-documentation-book-and-website" title="Link to this heading">¶</a></h3>
<p>After a build of FriCAS, (suppose your build directory is under
<code class="docutils literal notranslate"><span class="pre">$BUILD</span></code>), you can build the documentation provided at
the <a class="reference external" href="https://fricas.github.io/index.html">FriCAS home page</a> on your local installation.</p>
<p>If you want only <a class="reference external" href="https://fricas.github.io/book.pdf">FriCAS Book</a> (also known as the FriCAS User
Guide) do</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make book
</pre></div>
</div>
<p>This build <a class="reference external" href="https://fricas.github.io/book.pdf">FriCAS Book</a> into <a href="#id1"><span class="problematic" id="id2">``</span></a>src/doc/book.pdf’’.</p>
<p>The <a class="reference external" href="https://fricas.github.io/index.html">FriCAS home page</a> can be built via</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make webdoc
</pre></div>
</div>
<p>This builds the full content of the <a class="reference external" href="https://fricas.github.io/index.html">FriCAS home page</a> into the directory
<code class="docutils literal notranslate"><span class="pre">src/doc/html</span></code> from which it can be committed to the <code class="docutils literal notranslate"><span class="pre">gh-pages</span></code>
branch of the official <a class="reference external" href="https://github.com/fricas/fricas">FriCAS git repository</a>.  This command also builds
<a class="reference external" href="https://fricas.github.io/book.pdf">FriCAS Book</a>.</p>
<p>Most links also work fine if you start</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>firefox src/doc/html/index.html
</pre></div>
</div>
<p>but some links point to the web.  If you want the links referring only
to the data on your computer, you call the compilation like this</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make localdoc
</pre></div>
</div>
<p>This will have broken references to the
<a class="reference external" href="https://fricas.github.io/fricas-notebooks/">FriCAS Demos and Tutorials</a>
as they live in a separate repository.  Do the following to get a local
copy and thus have working references.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd $BUILD/src/doc/html
git clone -b gh-pages https://github.com/fricas/fricas-notebooks
</pre></div>
</div>
<p>For more control on the generation of the FriCAS website content,
you can set various variables (see <code class="docutils literal notranslate"><span class="pre">src/doc/Makefile.in</span></code>)
in the <a class="reference external" href="https://github.com/fricas/fricas">FriCAS git repository</a>.
For example, if you like to push to your forked FriCAS repository and
refer to branch <code class="docutils literal notranslate"><span class="pre">foo</span></code> instead of <code class="docutils literal notranslate"><span class="pre">master</span></code> then do as follows
(replace <code class="docutils literal notranslate"><span class="pre">hemmecke</span></code> by your account name).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>make PACKAGE_SOURCE=https://github.com/hemmecke/fricas \
     BRANCH=foo \
     PACKAGE_URL=https://hemmecke.github.io/fricas \
     webdoc
</pre></div>
</div>
<p>If you want to change the version information provided by default
through <code class="docutils literal notranslate"><span class="pre">configure.ac</span></code>, you can add a variable assignment like this
to the above command.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PACKAGE_VERSION=$(git log -1 --pretty=%H)
PACKAGE_VERSION=&quot;1.3.9+ `date +&#39;%Y-%m-%d %H:%M&#39;`&quot;
</pre></div>
</div>
<p>Then, checkout the <code class="docutils literal notranslate"><span class="pre">gh-pages</span></code> branch and put the data from
<code class="docutils literal notranslate"><span class="pre">$BUILD/src/doc/html</span></code> into your <code class="docutils literal notranslate"><span class="pre">gh-pages</span></code> branch.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>git clone git@github.com:hemmecke/fricas.git
cd fricas
git checkout gh-pages
git rm -rf .
rm &#39;.gitignore&#39;
echo &#39;https://help.github.com/articles/using-jekyll-with-pages&#39; &gt; .nojekyll
cp -a $BUILD/src/doc/html/* .
rm -r _sources/api/
git add .
git commit -m &quot;$PACKAGE_VERSION&quot;
git push origin gh-pages
</pre></div>
</div>
<p>You must use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">--orphan</span> <span class="pre">gh-pages</span></code> if you do not yet have
a <code class="docutils literal notranslate"><span class="pre">gh-pages</span></code> branch.</p>
<p>Optional: If you add</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>text/x-spad       spad
</pre></div>
</div>
<p>to <code class="docutils literal notranslate"><span class="pre">/etc/mime.types</span></code> and in firefox associate <code class="docutils literal notranslate"><span class="pre">text/x-spad</span></code> with
your editor, then clicking on a <code class="docutils literal notranslate"><span class="pre">.spad</span></code> file opens the <code class="docutils literal notranslate"><span class="pre">.spad</span></code>
file in this editor.</p>
</section>
<section id="build-fricas-aldor-interface-libfricas-al">
<h3><a class="toc-backref" href="#id24" role="doc-backlink">Build FriCAS-Aldor interface (libfricas.al)</a><a class="headerlink" href="#build-fricas-aldor-interface-libfricas-al" title="Link to this heading">¶</a></h3>
<p>You can not only extend the FriCAS library by <code class="docutils literal notranslate"><span class="pre">.spad</span></code> files (SPAD
programs), but also by <code class="docutils literal notranslate"><span class="pre">.as</span></code> files (<a class="reference external" href="https://github.com/aldorlang/aldor">Aldor</a> programs).  For the latter
to work FriCAS needs a library <code class="docutils literal notranslate"><span class="pre">libfricas.al</span></code>.</p>
<p>Note that building the interface temporarily needs about 2 GB extra
disk space.  Since currently, building the Aldor interface accesses the
build files of a previous <a class="reference external" href="https://fricas.github.io/index.html">FriCAS</a> build, you need about 3 GB disk
space.</p>
<p>If you configured FriCAS using <code class="docutils literal notranslate"><span class="pre">--enable-aldor</span></code> option, then
<code class="docutils literal notranslate"><span class="pre">make</span></code> will also build <code class="docutils literal notranslate"><span class="pre">libfricas.al</span></code> and <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code>
will install it together with FriCAS.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">aldor</span></code> binary is not reachable during build via your
<code class="docutils literal notranslate"><span class="pre">PATH</span></code>, you can add <code class="docutils literal notranslate"><span class="pre">--with-aldor-binary=/path/to/aldor</span></code> to the
configure command line.</p>
<p>Note: at runtime, the Aldor binary is taken as specified by the
<code class="docutils literal notranslate"><span class="pre">ALDOR_COMPILER</span></code> environment variable or (if not set) must be
available through the <code class="docutils literal notranslate"><span class="pre">PATH</span></code>.</p>
<p>After installation you should be able to compile and use the program
below in a FriCAS session via</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>)compile sieve.as
sieve 10
</pre></div>
</div>
<p>The program <code class="docutils literal notranslate"><span class="pre">sieve.as</span></code> is</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>--
-- sieve.as: A prime number sieve to count primes &lt;= n.
--
#include &quot;fricas&quot;

N ==&gt; NonNegativeInteger;
import from Boolean, N, Integer;

sieve(n: N): N  == {
    isprime: PrimitiveArray Boolean := new(n+1, true);
    np: N := 0;
    two: N := 2;
    for p in two..n | isprime(p::Integer) repeat {
        np := np + 1;
        for i in two*p..n by p::Integer repeat {
            isprime(i::Integer) := false;
        }
    }
    np
}
</pre></div>
</div>
</section>
<section id="install-jfricas">
<h3><a class="toc-backref" href="#id25" role="doc-backlink">Install jFriCAS</a><a class="headerlink" href="#install-jfricas" title="Link to this heading">¶</a></h3>
<p>There are a couple of things to install.</p>
<ol class="arabic simple">
<li><p>Jupyter</p></li>
<li><p>jFriCAS</p></li>
</ol>
<p>The simplest way to install <a class="reference external" href="https://jfricas.readthedocs.io">jFriCAS</a> is via <cite>pip</cite> as follows</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install python3-pip
pip3 install jupyter
pip3 install jfricas
</pre></div>
</div>
<p>You can also install <a class="reference external" href="https://jfricas.readthedocs.io">jFriCAS</a> into a python virtual environment from
<a class="reference external" href="https://pypi.org/project/jfricas/">jfricas at PyPI</a> or from the
git repository.</p>
<p>Below, we describe the installation from the git repository.</p>
<p>Except for the file <code class="docutils literal notranslate"><span class="pre">$HOME/.jupyter/jupyter_notebook_config.py</span></code> that
maybe necessary to create, the following description will put most of
the things (in particular the git repositories) under the directory
<code class="docutils literal notranslate"><span class="pre">$FDIR</span></code>.
We assume that FriCAS will be installed into <code class="docutils literal notranslate"><span class="pre">$FRICASINSTALL</span></code>.
<a class="reference external" href="https://jfricas.readthedocs.io">jFriCAS</a> and <a class="reference external" href="https://jupyter.org">Jupyter</a> will go into <code class="docutils literal notranslate"><span class="pre">$JFRICASINSTALL</span></code>
You can change any of these paths.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>FDIR=$HOME/fricas
GITREPOS=$FDIR
FRICASINSTALL=$FDIR/install
export PATH=$FRICASINSTALL/bin:$PATH
VENV=$FDIR/venv
JFRICASINSTALL=$VENV/jfricas
mkdir -p $FDIR $GITREPOS $FRICASINSTALL $JFRICASINSTALL
</pre></div>
</div>
<section id="jfricas-installation">
<h4>jFriCAS installation<a class="headerlink" href="#jfricas-installation" title="Link to this heading">¶</a></h4>
<p><a class="reference external" href="https://jfricas.readthedocs.io">jFriCAS</a> is the <a class="reference external" href="https://jupyter.org">Jupyter</a> notebook interface to <a class="reference external" href="https://fricas.github.io/index.html">FriCAS</a>.  Of course,
<a class="reference external" href="https://jfricas.readthedocs.io">jFriCAS</a> needs <a class="reference external" href="https://jupyter.org">Jupyter</a> in a reasonably recent version (at least 4).</p>
<p>Install prerequisites if not yet available (needs root access, but it
may already be installed on your system).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install python3-pip python3-venv
</pre></div>
</div>
<p>Prepare directories and download <a class="reference external" href="https://jfricas.readthedocs.io">jFriCAS</a>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd $GITREPOS
git clone https://github.com/fricas/jfricas
</pre></div>
</div>
<p>Install prerequisites, <a class="reference external" href="https://jupyter.org">Jupyter</a> and <a class="reference external" href="https://jfricas.readthedocs.io">jFriCAS</a>.</p>
<p><strong>WARNING</strong>: Do not install jfricas 1.0.0 from PyPI, as that will
not work.  If you have it installed, then uninstall it first.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python3 -m venv $JFRICASINSTALL
source $JFRICASINSTALL/bin/activate
pip3 install jupyter
cd $GITREPOS/jfricas
pip3 install .
jupyter kernelspec list
</pre></div>
</div>
<p>The output of the last command should show something similar to the
following.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Available kernels:
  jfricas    /home/hemmecke/fricas/venv/jfricas/share/jupyter/kernels/jfricas
  python3    /home/hemmecke/fricas/venv/jfricas/share/jupyter/kernels/python3
</pre></div>
</div>
<p>Create the script <code class="docutils literal notranslate"><span class="pre">jfricas</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cat &gt; $FRICASINSTALL/bin/jfricas &lt;&lt;EOF
source $JFRICASINSTALL/bin/activate
jupyter notebook \$1
EOF
chmod +x $FRICASINSTALL/bin/jfricas
</pre></div>
</div>
<p>Start a new terminal or set the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> on the command line or inside
your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file and start <code class="docutils literal notranslate"><span class="pre">jfricas</span></code> from any directory (after
you have installed <a class="reference external" href="https://fricas.github.io/index.html">FriCAS</a>).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>export PATH=$FRICASINSTALL/bin:$PATH
</pre></div>
</div>
<p>Note that inside jupyter the place from where you start
<code class="docutils literal notranslate"><span class="pre">jfricas</span></code> is the place where your notebooks will be stored.</p>
<p>You can start a new FriCAS session by selecting <code class="docutils literal notranslate"><span class="pre">FriCAS</span></code> from the
<code class="docutils literal notranslate"><span class="pre">New</span></code> drop down menu.
If you want to enjoy nice looking output, then type the following
inside a notebook cell.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>)set output algebra off
setFormat!(FormatMathJax)$JFriCASSupport
</pre></div>
</div>
<p>You can go back to standard 2D ASCII output as follows.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>)set output formatted off
)set output algebra on
</pre></div>
</div>
</section>
<section id="optional-install-jupytext">
<h4>(optional) Install JupyText<a class="headerlink" href="#optional-install-jupytext" title="Link to this heading">¶</a></h4>
<p>Ordinary Jupyter notebooks use a special format in order to store
their content.  They have the file extension <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code>.  It is an
incredible feature to be able to load and store notebooks as ordinary
FriCAS <code class="docutils literal notranslate"><span class="pre">.input</span></code> files.  You can even synchronize between the
<code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> and <code class="docutils literal notranslate"><span class="pre">.input</span></code> formats.</p>
<p>There are two types of cells in <a class="reference external" href="https://jupyter.org">Jupyter</a>: Markdown documentation
cells and execution cells.  With the help of <a class="reference external" href="https://jupytext.readthedocs.io">JupyText</a>, Markdown
cells will appear inside an <code class="docutils literal notranslate"><span class="pre">.input</span></code> file as <a class="reference external" href="https://fricas.github.io/index.html">FriCAS</a>
comments and execution cells appear without the <code class="docutils literal notranslate"><span class="pre">&quot;--</span> <span class="pre">&quot;</span></code>
comment prefix.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>source $JFRICASINSTALL/bin/activate
pip3 install jupytext
</pre></div>
</div>
<p>Enable the spad language and set the respective parameters.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd $HOME
J=$(find $JFRICASINSTALL -type d | grep &#39;/site-packages/jupytext$&#39;)
emacs $J/languages.py
</pre></div>
</div>
<p>Edit the file <code class="docutils literal notranslate"><span class="pre">$J/languages.py</span></code> and change appropriately.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># Jupyter magic commands that are also languages
_JUPYTER_LANGUAGES = [&quot;spad&quot;, &quot;R&quot;, ...]

# Supported file extensions (and languages)
# Please add more languages here (and add a few tests) - see CONTRIBUTING.md
_SCRIPT_EXTENSIONS = {
   &quot;.py&quot;: {&quot;language&quot;: &quot;python&quot;, &quot;comment&quot;: &quot;#&quot;},
    &quot;.input&quot;: {&quot;language&quot;: &quot;spad&quot;, &quot;comment&quot;: &quot;--&quot;},
    &quot;.input-test&quot;: {&quot;language&quot;: &quot;spad&quot;, &quot;comment&quot;: &quot;--&quot;},
    ...
}
</pre></div>
</div>
</section>
<section id="make-jupytext-available">
<h4>Make Jupytext available<a class="headerlink" href="#make-jupytext-available" title="Link to this heading">¶</a></h4>
<p>In Ubuntu 22.04 you do not need to run the commands from this section.
It seemingly works without having to change something in the
configuration file.  There were even reports that <a class="reference external" href="https://jfricas.readthedocs.io">jFriCAS</a> stopped
working if <code class="docutils literal notranslate"><span class="pre">c.NotebookApp.contents_manager_class</span></code> was set.  However,
for older versions of <a class="reference external" href="https://jupytext.readthedocs.io">JupyText</a> and/or <a class="reference external" href="https://jupyter.org">Jupyter</a>, the following had to be
configured.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">$HOME/.jupyter/jupyter_notebook_config.py</span></code> does not yet exist,
generate it.
<em>Note that this is outside the</em> <code class="docutils literal notranslate"><span class="pre">$FDIR</span></code> <em>directory.</em></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>jupyter notebook --generate-config
</pre></div>
</div>
<p>For the following see
<a class="reference external" href="https://jupyter-notebook.readthedocs.io/en/stable/config.html">https://jupyter-notebook.readthedocs.io/en/stable/config.html</a> .</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sed -i &#39;s|^# *c.NotebookApp.use_redirect_file = .*|c.NotebookApp.use_redirect_file = False|&#39; $HOME/.jupyter/jupyter_notebook_config.py
</pre></div>
</div>
<p>The following enables <a class="reference external" href="https://jupytext.readthedocs.io">JupyText</a>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sed -i &#39;s|^# *c.NotebookApp.contents_manager_class =.*|c.NotebookApp.contents_manager_class = &quot;jupytext.TextFileContentsManager&quot;|&#39; $HOME/.jupyter/jupyter_notebook_config.py
</pre></div>
</div>
<p>Put the following input into the file <code class="docutils literal notranslate"><span class="pre">$FDIR/foo.input</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-- # FriCAS demo notebook

)set output algebra off
setFormat!(FormatMathJax)$JFriCASSupport

-- Here we compute $\frac{d^2}{dx^2} sin(x^3)$.

D(sin(x^3),x,2)

-- We compute the indefinite integral $\int \sin x \cdot e^x dx$.

integrate(exp(x)*sin(x), x)
</pre></div>
</div>
<p>Then start via <code class="docutils literal notranslate"><span class="pre">jfricas</span></code>, load <code class="docutils literal notranslate"><span class="pre">foo.input</span></code> and enjoy.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd $FDIR
jfricas
</pre></div>
</div>
<p>If something does not work then look at the end of <code class="docutils literal notranslate"><span class="pre">fricaskernel.py</span></code>
and experiment with different versions of how to start FriCAS.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>FRICASKERNEL=$(find $JFRICASINSTALL -type f | grep &#39;fricaskernel\.py$&#39;)
emacs $FRICASKERNEL
</pre></div>
</div>
<p>You can also download or clone the demo notebooks from
<a class="reference external" href="https://github.com/fricas/fricas-notebooks/">https://github.com/fricas/fricas-notebooks/</a> and compare them with what
you see at
<a class="reference external" href="https://fricas.github.io/fricas-notebooks/index.html">FriCAS Demos and Tutorials</a>.</p>
</section>
</section>
<section id="install-frimacs">
<h3><a class="toc-backref" href="#id26" role="doc-backlink">Install frimacs</a><a class="headerlink" href="#install-frimacs" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="https://github.com/pdo/frimacs">frimacs</a> is an <a class="reference external" href="https://www.gnu.org/software/emacs/">Emacs</a> mode for FriCAS with special features to
edit <code class="docutils literal notranslate"><span class="pre">.input</span></code> and <code class="docutils literal notranslate"><span class="pre">.spad</span></code> files as well as executing a <a class="reference external" href="https://fricas.github.io/index.html">FriCAS</a>
session inside an <a class="reference external" href="https://www.gnu.org/software/emacs/">Emacs</a> buffer.</p>
<p>Install as follows.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd $GITREPOS
git clone https://github.com/pdo/frimacs.git
</pre></div>
</div>
<p>If your <code class="docutils literal notranslate"><span class="pre">GITREPOS=/home/hemmecke/fricas</span></code>, then add the line</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(load-file &quot;/home/hemmecke/fricas/frimacs/frimacs.el&quot;)
</pre></div>
</div>
<p>to your <code class="docutils literal notranslate"><span class="pre">.emacs</span></code> or <code class="docutils literal notranslate"><span class="pre">.emacs.d/init.el</span></code> file.</p>
<p>To start a <a class="reference external" href="https://fricas.github.io/index.html">FriCAS</a> session use</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>M-x run-fricas
</pre></div>
</div>
</section>
</section>
<section id="creation-of-distribution-tarballs">
<h2><a class="toc-backref" href="#id27" role="doc-backlink">Creation of distribution tarballs</a><a class="headerlink" href="#creation-of-distribution-tarballs" title="Link to this heading">¶</a></h2>
<p>The source distribution can be created as follows.  Fetch and
build sources, taking care to build Hyperdoc pages and graphic
examples.  Make sure that text of help pages is available in some
directory (they are <strong>not</strong> part of source tree, some are generated,
but the rest is copied to tarball).  Assuming that you build FriCAS
in <code class="docutils literal notranslate"><span class="pre">fr-build</span></code> and <code class="docutils literal notranslate"><span class="pre">$SRC</span></code> point to FriCAS source tree do</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cd fr-build
$SRC/src/scripts/mkdist.sh --copy_lisp --copy_phts \
  --copy_help=/full/path/to/help/files
mv dist ../fricas-X.Y.Z
cd ..
tar -cjf fricas-X.Y.Z.tar.bz2 fricas-X.Y.Z
</pre></div>
</div>
<p>Note: FriCAS source distributions are created from a branch which
differs from trunk, namely release branch has version number, trunk
instead gives date of last update to <code class="docutils literal notranslate"><span class="pre">configure.ac</span></code>.  If you
wish you can create distribution tarballs from trunk.</p>
<p>The binary distribution can be created as follows.  First fetch and
unpack source tarball in work directory.  Then in work directory</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mkdir fr-build
../fricas-X.Y.Z/configure --enable--gmp --with-lisp=/path/to/hsbcl
make -j 7 &gt; makelog 2&gt;&amp;1
make DESTDIR=/full/path/to/auxiliary/dir install
cd /full/path/to/auxiliary/dir
tar -cjf fricas-x.y.z.amd64.tar.bz2 usr
</pre></div>
</div>
</section>
<section id="installation-from-binary-distribution">
<h2><a class="toc-backref" href="#id28" role="doc-backlink">Installation from binary distribution</a><a class="headerlink" href="#installation-from-binary-distribution" title="Link to this heading">¶</a></h2>
<p>You can download the latest release as a <code class="docutils literal notranslate"><span class="pre">.tar.bz2</span></code> from
<a class="reference external" href="https://github.com/fricas/fricas/releases">https://github.com/fricas/fricas/releases</a> and install as follows (of
course, you can set <code class="docutils literal notranslate"><span class="pre">FDIR</span></code> to anything you like).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>FDIR=$HOME/fricas
mkdir -p $FDIR
cd $FDIR
tar xjf fricas-x.y.z.amd64.tar.bz2
</pre></div>
</div>
<p>If before running <code class="docutils literal notranslate"><span class="pre">tar</span></code> you change to the root directory and do
this command as <code class="docutils literal notranslate"><span class="pre">root</span></code>, then you will get ready to run FriCAS in
the <code class="docutils literal notranslate"><span class="pre">/usr/local</span></code> subtree of the filesystem.  This puts FriCAS files
in the same places as running <code class="docutils literal notranslate"><span class="pre">install</span></code> after build from source
using default settings.</p>
<p>Alternatively, you can put FriCAS files anywhere in your file system,
which is useful if you want to install FriCAS without administrator
rights.</p>
<p>For this to work you need to adapt the <code class="docutils literal notranslate"><span class="pre">fricas</span></code> and <code class="docutils literal notranslate"><span class="pre">efricas</span></code> scripts
to point to the right paths.  This is explained in</p>
<p><a class="reference external" href="http://fricas.sourceforge.net/doc/INSTALL-bin.txt">http://fricas.sourceforge.net/doc/INSTALL-bin.txt</a></p>
<p>After installation you can start FriCAS with full path name
like one of the following commands.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$FDIR/usr/local/bin/fricas
$FDIR/usr/local/bin/efricas
</pre></div>
</div>
<p>Of course, you must have <a class="reference external" href="https://www.gnu.org/software/emacs/">Emacs</a> installed for the <code class="docutils literal notranslate"><span class="pre">efricas</span></code>
script to work correctly.</p>
<p>You might have to install</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt install xfonts-75dpi xfonts-100dpi
</pre></div>
</div>
<p>and restart the X server (log out and log in again) in case the font
in HyperDoc does not look pretty.</p>
<p>That is, however, not necessary, if you do not intend to use HyperDoc
a lot and rather look at the <a class="reference external" href="https://fricas.github.io/index.html">FriCAS</a> homepage in order to find
relevant information.</p>
<p>Optionally, set the PATH in <code class="docutils literal notranslate"><span class="pre">$HOME/.bashrc</span></code>:</p>
<p>Edit the file <code class="docutils literal notranslate"><span class="pre">$HOME/.bashrc</span></code> (or whatever your shell initialization
resource is) and put in something like the following in order to make
all fricas scripts available.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>FDIR=$HOME/fricas
export PATH=$FDIR/usr/local/bin:$PATH
</pre></div>
</div>
</section>
<section id="known-problems">
<h2><a class="toc-backref" href="#id29" role="doc-backlink">Known problems</a><a class="headerlink" href="#known-problems" title="Link to this heading">¶</a></h2>
<ul>
<li><p>currently when using case insensitive filesystem (typically on
macOS and Windows), the git version can only be built in a
separate directory (in-tree build will fail).  This does not affect
release tarball.</p></li>
<li><p>In general, any error when generating documentation will cause build
to hang.</p></li>
<li><p>32-bit sbcl from 1.5.9 to 2.1.3 may miscompile floating point
comparisons.   Due to this most plots will fail.   The problem is
fixed in newer versions of sbcl.   Alternatively, use older
version of sbcl.   64-bit sbcl works OK.</p></li>
<li><p>by default sbcl 1.0.54 and newer limits memory use to 1GB, which is
too small for heavy use.  To work around this one can pass
<code class="docutils literal notranslate"><span class="pre">--dynamic-space-size</span></code> argument during sbcl build to increase
default limit.
We recommend limit slightly smaller than amount of
available RAM (in this way FriCAS will be able to use almost all
RAM, but limit should prevent thrashing).</p></li>
<li><p>Some Linux versions, notably SuSE, by default seem to have very
small limit on virtual memory.  This causes build failure when using
sbcl or Clozure CL.  Also if limit on virtual memory is too small
sbcl-based or Clozure CL-based FriCAS binary will silently fail at
startup.  The simplest workaround is to increase limit, in the shell
typing</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ulimit -v unlimited
</pre></div>
</div>
<p>Alternatively for sbcl one can use <code class="docutils literal notranslate"><span class="pre">--dynamic-space-size</span></code> argument
to decrease use of virtual memory.</p>
</li>
<li><p>CLISP built with threads support may fail to compile FriCAS.</p></li>
<li><p>On new Linux kernel build using Clisp may take very long time.  This
is caused by frequent calls to <code class="docutils literal notranslate"><span class="pre">fsync</span></code> performed without need by
Clisp.</p></li>
<li><p>on some systems (notably MAC OSX) when using sbcl default limit of
open files may be too low.  To workaround increase limit (experiments
suggest that 512 open files is enough).  This should not be needed in
FriCAS 1.1.7.</p></li>
<li><p>sbcl from 1.3.1 to 1.3.4 runs out of memory when compiling FriCAS.
This is fixed in newer versions of sbcl.</p></li>
<li><p>using sbcl from 1.0.47 to 1.0.49 compilation is very slow (few hours
on fast machine).  This is fixed in newer versions of sbcl.</p></li>
<li><p>sbcl-1.0.29 has a bug in the <code class="docutils literal notranslate"><span class="pre">directory</span></code> function which causes
build failure.  This problem is fixed in 1.0.29.54.rc1.</p></li>
<li><p>1.0.29.54.rc1 has broken complex <code class="docutils literal notranslate"><span class="pre">tanh</span></code> function – you will get
wrong results when applying <code class="docutils literal notranslate"><span class="pre">tanh</span></code> to <code class="docutils literal notranslate"><span class="pre">Complex</span> <span class="pre">DoubleFloat</span></code>.</p></li>
<li><p>in sbcl 1.0.35 and up Control-C handling did not work.  This should
be fixed in current FriCAS.</p></li>
<li><p>gcl-2.6.14 by default tries to use large fraction of available
memory.  However with default settings, it can only load code
into first 2Gb of memory.  If more than 2Gb of memory are
available this is likely to lead to error when loading compiled
code after longer computation.  Due to this, FriCAS build is
likely to fail.  One possible workaround is to limit amount of
memory available to gcl.  This can be done by setting environment
variable GCL_MEM_MULTIPLE.  Set it to floating point value which
multiplied by total memory gives about 2Gb.  For example, on
32Gb machine set GCL_MEM_MULTIPLE to 0.07.</p></li>
<li><p>Boehm garbage collector included in old ECL (version 6.8) is incompatible
with Fedora strong address space randomization (setting randomize_va_space
to 2).   Using newer version of Boehm garbage collector (7.0 or 7.1) or
newer ECL should solve this problem.</p></li>
<li><p>Striping FriCAS binaries is likely to break them.  In particular
Clisp based FriCAS may crash with message</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module &#39;syscalls&#39; requires package OS.
</pre></div>
</div>
<p>while sbcl will show only loader prompt.</p>
</li>
<li><p>On Mac OSX Tiger some users reported problems with pseudoterminals,
build stopped with the message</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fork_Axiom: Failed to reopen server: No such file or directory
</pre></div>
</div>
<p>This problem is believed to be fixed in FriCAS-1.0.5 (and later).</p>
</li>
<li><p>ECL 9.6.2 (and probably also 9.6.1 and 9.6.0) has a bug with
handling string constants which causes build based on this version
to fail.  This bugs is fixed in newer versions.  ECL 9.7.1 generates
wrong C code, so that build fails.  This is fixed in newer versions.</p></li>
<li><p>Unicode-enabled ECL before 9.8.4 is unable to build FriCAS.</p></li>
<li><p>ECL up to version 0.9l may segfault at exit.  This is usually
harmless, but may cause build to hang (for example when generating
<code class="docutils literal notranslate"><span class="pre">ug13.pht</span></code>).</p></li>
<li><p>Clozure CL 1.10 apparently miscompiles some operations on U32Matrix.
Version 1.11 works OK.</p></li>
<li><p>Clozure CL 1.7 and 1.6 apparently miscompiles FriCAS.  Versions 1.8
and newer and 1.5 and earlier work OK.</p></li>
<li><p>Clozure CL earlier than release 1.2 (former Openmcl) has a bug in
Lisp printer.  This bug causes incorrect printing of FriCAS types.
Also, Clozure CL earlier than release 1.2 has bug in complex cosine
function.  Those bugs are fixed in release 1.2.  If you want to use
earlier version you can work around the bugs applying the
<code class="docutils literal notranslate"><span class="pre">contib/omcl.diff</span></code> patch and recompiling the compiler (see the
patch or Clozure CL documentation for instructions).</p></li>
<li><p>Older versions of Clisp may fail to build FriCAS complaining about
opening already opened file – this is error is spurious, the file
in question in fact is closed, but for some reason Clisp got
confused.</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api/index.html">FriCAS API</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="citation.html">Citation</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">History</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/install.rst.txt"
           rel="nofollow">Show Source</a></li>
    <li><a href="https://github.com/fricas/fricas/blob/master/src/doc/sphinx/source/install.rst"
           rel="nofollow">Show on GitHub</a></li>
    <li><a href="https://github.com/fricas/fricas/edit/master/src/doc/sphinx/source/install.rst"
           rel="nofollow">Edit on GitHub</a></li>
  </ul>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="help.html" title="Help"
             >next</a> |</li>
        <li class="right" >
          <a href="download.html" title="Download"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">FriCAS</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="download.html" >Download</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Installation Guide</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2007-2025, FriCAS Team.
    </div>
  </body>
</html>